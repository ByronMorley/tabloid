function postHtmlData(a){$.post("tabloid/php/save.php",{content:$(a).prop("outerHTML")}).done(function(){window.open("tabloid/php/pdf_download.php")})}function renderContent(a){return $("<html>").append($("<head>").append($("<meta>").attr("charset","UTF-8"),$("<meta>").attr({"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"}),$("<link>").attr({href:"../css/style.min.css",type:"text/css",media:"screen",rel:"stylesheet"})),$("<body>").append($("<div>").addClass("pdf-container").append($("<h1>").text($("#pdf-site-info").attr("root")),$("<h2>").text($("#pdf-site-info").attr("page")),$("<div>").addClass("breadcrumbnavigation").html($(".breadcrumbnavigation").html()),a.html())))}function convertImages(a){var b=a.find("img"),c=b.length,d=0;b.each(function(){var b=$(this),e=b.attr("src");toDataURL(e,function(e){d++,b.attr("src",e),d>=c&&postHtmlData(renderContent(a))})}),0==c&&postHtmlData(renderContent(a))}function clean_html(a){var b="audio, .pagination-block, .you-tube-block, .video-block";return a.find(b).each(function(){$(this).remove()}),a}function toDataURL(a,b,c){var d=new Image;d.crossOrigin="Anonymous",d.onload=function(){var a,d=document.createElement("CANVAS"),e=d.getContext("2d");d.height=this.naturalHeight,d.width=this.naturalWidth,e.drawImage(this,0,0),a=d.toDataURL(c),b(a)},d.src=a,(d.complete||void 0===d.complete)&&(d.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",d.src=a)}$(document).ready(function(){$(".pdf_downloader").on("click",function(a){a.preventDefault(),convert_to_pdf()})});var convert_to_pdf=function(){var a=get_content();clean_html(a),convertImages(a)},get_content=function(){return $(".nav-tabs").length>0?$("<div>").append($(".desktop").find(".block").clone()):$("<div>").append($(".block").clone())};
//# sourceMappingURL=main.min.js.map